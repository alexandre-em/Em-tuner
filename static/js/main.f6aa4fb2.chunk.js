(this.webpackJsonptuner=this.webpackJsonptuner||[]).push([[0],{67:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),c=n(53),a=n.n(c),i=(n(67),n(112)),u=n(111),s=n(25),f=n(12),l=n(102),d=n(107),h=n(109);var b,j,x,p,y,v,g,O=n(31),q=n(21),w=n.n(q),m=n(56),M=window.AudioContext||window.webkitAudioContext||!1,k=function(){var e=Object(O.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b=new M,e.next=3,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 3:j=e.sent,S(b,j,t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(O.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=j)||void 0===t?void 0:t.getTracks().forEach(function(){var e=Object(O.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.stop();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:if("running"!==b.state&&"suspended"!==b.state){e.next=5;break}return e.next=5,b.close();case 5:console.log(j,b);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(e,t,n){var r=function(){var t=Object(O.a)(w.a.mark((function t(c,a){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("suspended"!==e.state){t.next=3;break}return t.next=3,e.resume();case 3:c?console.error(c):(a&&n(a),o.getPitch(r));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),o=Object(m.pitchDetection)("models/",e,t,(function(){console.log("Model Loaded!"),o.getPitch(r)}))},E=n(16),A=n(18),B=A.a.div(x||(x=Object(E.a)(["\n  flex: 0.4;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),D=A.a.div(p||(p=Object(E.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n\talign-items: center;\n  justify-content: space-around;\n"]))),F=A.a.div((function(e){return{backgroundColor:e.backgroundColor,position:"relative",width:"90%",height:80,borderRadius:100,display:"flex",justifyContent:"center",border:"2px solid white",color:"rgb(76, 150, 76)",boxShadow:"10px 10px 21px -7px rgba(0, 0, 0, 0.2)",WebkitBoxShadow:"10px 10px 21px -7px rgba(0, 0, 0, 0.2)",MozBoxShadow:"10px 10px 21px -7px rgba(0, 0, 0, 0.2)",margin:20}})),G=(A.a.div((function(e){var t=e.progress;return Object(s.a)(Object(s.a)({width:"".concat(Math.abs(t),"%"),height:"100%"},t>0&&{borderRight:".25vw solid red"}),t<0&&{borderLeft:".25vw solid red"})})),A.a.div(y||(y=Object(E.a)(["\n  position: absolute;\n  top: 25%;\n  color: white;\n"])))),I=n(3);function L(e){var t=e.show,n=void 0===t||t,c=e.onStart,a=e.onClose,i=function(){function e(e){this.val=e,this.left=this.right=null}return[function t(n){if(1===n.length)return new e(n[0]);if(0===n.length)return null;var r=Math.floor(n.length/2),o=new e(n[r]),c=n.slice(0,r);o.left=t(c);var a=n.slice(r+1,n.length);return o.right=t(a),o}([{frequency:28,note:"A0"},{frequency:31,note:"B0"},{frequency:33,note:"C1"},{frequency:37,note:"D1"},{frequency:41,note:"E1"},{frequency:44,note:"F1"},{frequency:49,note:"G1"},{frequency:55,note:"A1"},{frequency:62,note:"B1"},{frequency:65,note:"C2"},{frequency:73,note:"D2"},{frequency:82,note:"E2"},{frequency:87,note:"F2"},{frequency:98,note:"G2"},{frequency:110,note:"A2"},{frequency:123,note:"B2"},{frequency:131,note:"C3"},{frequency:147,note:"D3"},{frequency:165,note:"E3"},{frequency:175,note:"F3"},{frequency:196,note:"G3"},{frequency:220,note:"A3"},{frequency:247,note:"B3"},{frequency:262,note:"C4"},{frequency:294,note:"D4"},{frequency:330,note:"E4"},{frequency:349,note:"F4"},{frequency:392,note:"G4"},{frequency:440,note:"A4"},{frequency:494,note:"B4"}]),function e(t,n){if(t.val.frequency===n)return t;if(n<t.val.frequency){if(!t.left)return t;var r=e(t.left,n);return Math.abs(r.val.frequency-n)>Math.abs(t.val.frequency-n)?t:r}if(!t.right)return t;var o=e(t.right,n);return Math.abs(o.val.frequency-n)>Math.abs(t.val.frequency-n)?t:o}]}(),u=Object(f.a)(i,2),b=u[0],j=u[1],x=Object(r.useState)(),p=Object(f.a)(x,2),y=p[0],v=p[1],g=Object(r.useState)(""),O=Object(f.a)(g,2),q=O[0],w=O[1],m=Object(r.useState)(0),M=Object(f.a)(m,2),S=M[0],E=M[1],A=Object(r.useState)(),L=Object(f.a)(A,2),P=L[0],R=L[1],T=o.a.useState(!1),z=Object(f.a)(T,2),J=z[0],_=z[1],N=Object(r.useMemo)((function(){return J?"outlined":"contained"}),[J]),U=Object(r.useMemo)((function(){return J?"error":"primary"}),[J]),W=Object(r.useMemo)((function(){return J?Object(I.jsx)(d.a,{}):Object(I.jsx)(l.a,{})}),[J]),H=Object(r.useCallback)((function(){J||k(R).then((function(){_(!0),c&&c()})),J&&C().then((function(){_(!1),a&&a()}))}),[J,a,c]),K=o.a.useMemo((function(){return"hsl(".concat(Math.abs(120-S),"deg, 55%, 65%)")}),[S]);return Object(r.useEffect)((function(){if(P&&J)if(y){var e=Math.floor(5.9*(Math.abs(Math.floor(P))-y.val.frequency));(e<-105||e>105)&&v(j(b,Math.abs(Math.floor(P)))),E(e),w(y.val.note)}else v(j(b,Math.abs(Math.floor(P))))}),[P,J]),n?Object(I.jsx)(B,{"data-test":"tuner",children:Object(I.jsxs)(D,{children:[Object(I.jsxs)(F,{backgroundColor:K,children:[Object(I.jsx)("div",{className:"tuner__progress",style:Object(s.a)(Object(s.a)({width:"".concat(Math.abs(S),"%"),height:"100%"},S>0&&{borderRight:".25vw solid red"}),S<0&&{borderLeft:".25vw solid red"})}),Object(I.jsx)(G,{children:Object(I.jsx)("h1",{children:q?"".concat(q):"-/-"})})]}),Object(I.jsxs)(h.a,{variant:N,color:U,startIcon:W,onClick:function(){return H()},children:[J?"Stop":"Start"," tunning"]})]})}):Object(I.jsx)(I.Fragment,{})}L.defaultProps={show:!0,onStart:function(){return null},onClose:function(){return null}};var P=A.a.a(v||(v=Object(E.a)(["\n\tposition: absolute;\n\tbottom: 10px;\n\tright: 10px;\n\tdisplay: flex;\n\tflex-direction: column;\n\talignItems: center;\n\tcolor: gray;\n\ttext-decoration: none;\n\tcursor: pointer;\n"]))),R=A.a.div(g||(g=Object(E.a)(["\n\tdisplay: flex;\n\tposition: relative;\n\tbackground-color: #ededed;\n\theight: 100%;\n\twidth: 100%;\n\tjustify-content: center;\n"]))),T={padding:5,width:"80%",height:"min-content",alignSelf:"center"},z=n(108);var J=function(){return Object(I.jsxs)(R,{children:[Object(I.jsxs)(i.a,{sx:T,elevation:12,children:[Object(I.jsx)(u.a,{variant:"h4",children:"Em Tuner \ud83c\udfb8"}),Object(I.jsx)(u.a,{variant:"h7",color:"text.secondary",children:"Tune your instrument by playing a note near your mic or by selecting your input"}),Object(I.jsx)(L,{})]}),Object(I.jsxs)(P,{href:"https://github.com/alexandre-em/Em-tuner",children:[Object(I.jsx)(z.a,{fontSize:"large"}),Object(I.jsx)(u.a,{variant:"h7",color:"text.secondary",style:{textAlign:"center"},children:"Code"})]})]})};a.a.render(Object(I.jsx)(o.a.StrictMode,{children:Object(I.jsx)(J,{})}),document.getElementById("root"))}},[[90,1,2]]]);